<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>設定 | 幻想郷ジェネレーター</title>
<link rel="stylesheet" href="../static/style.css">
</head>
<body>

<div class="container">
  <h2>設定</h2>

  <p class="note">
    Gemini APIキーは、この端末のブラウザにのみ保存されます。<br>
    他の端末では、再入力が必要です。
  </p>

  <input id="apiKey" type="password" placeholder="GEMINI_API_KEY">
  <button id="saveKey">保存</button>

  <div id="status"></div>

  <a href="./gensokyo.html">← ジェネレーターへ戻る</a>
</div>

<script>
const input = document.getElementById("apiKey");
const status = document.getElementById("status");

const saved = localStorage.getItem("GEMINI_API_KEY");
if (saved) {
  input.value = "***************";
}

document.getElementById("saveKey").addEventListener("click", () => {
  const val = input.value.trim();
  if (!val || val.startsWith("*")) {
    status.textContent = "新しいキーを入力してください";
    return;
  }
  localStorage.setItem("GEMINI_API_KEY", val);
  input.value = "***************";
  status.textContent = "保存しました";
});
</script>

</body>
</html>